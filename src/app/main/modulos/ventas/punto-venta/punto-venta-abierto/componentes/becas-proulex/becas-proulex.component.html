<div class="w-100-p h-100-p" fxLayout="column">
    <div fxFlex="0 0 7%" fxLayout="row" fxLayoutAlign="space-between start">
        <span class="titulo-navegador accent-fg">
            <mat-icon class="clickable mr-12" (click)="onVistaAtras()">arrow_back</mat-icon> Becas proulex
        </span>
        <div class="search-wrapper mx-32 mx-md-0">
            <div class="search" fxFlex fxLayout="row" fxLayoutAlign="start center">
                <mat-icon>search</mat-icon>
                <input placeholder="{{ 'INTERFAZ.BUSCAR' | translate  }}..." [formControl]="filtroControl" [readonly]="_puntoVentaAbiertoService.cargando">
            </div>
        </div>
    </div>

    <div fxFlex="0 0 93%" fxLayout="column" class="fuse-white-bg">
        <div fxFlex="0 0 10%" fxLayout="row" fxLayoutAlign="end center" class="py-8 px-16">
            <span class="tag blue-bg">{{ dataSourceBecas?.filteredData?.length }} beca(s)</span>
        </div>
        <div fxFlex="0 0 90%" fxLayout="row" class="px-12">
            <mat-table
                fxFlex="100" style="max-height: 100%;"
                class="tabla-becas-proulex ficha-table h-100-p"
                #tablaBecas
                [dataSource]="dataSourceBecas"
                matSort
                [@animateStagger]="{value:'50'}"
                cdkDropList
                id="tablaBecas"
                cdkVirtualFor
                (scroll)="onScrollDownBecas($event)"
            >
                <ng-container matColumnDef="entidadBeca">
                    <mat-header-cell
                        *matHeaderCellDef
                        mat-sort-header
                    >Entidad beca</mat-header-cell>
                    <mat-cell *matCellDef="let beca" >
                        <p>{{ beca.entidadBeca }}</p>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="codigoProulex">
                    <mat-header-cell
                        *matHeaderCellDef
                        mat-sort-header
                    >Código proulex</mat-header-cell>
                    <mat-cell *matCellDef="let beca" >
                        <p>{{ beca.codigoProulex }}</p>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="codigoBeca">
                    <mat-header-cell
                        *matHeaderCellDef
                        mat-sort-header
                    >Código beca</mat-header-cell>
                    <mat-cell *matCellDef="let beca" >
                        <p>{{ beca.codigoBeca }}</p>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="codigoUDG">
                    <mat-header-cell
                        *matHeaderCellDef
                        mat-sort-header
                    >Código UDG</mat-header-cell>
                    <mat-cell *matCellDef="let beca" >
                        <p>{{ beca.codigoEmpleado }}</p>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="primerApellido">
                    <mat-header-cell
                        *matHeaderCellDef
                        mat-sort-header
                    >Primer apellido</mat-header-cell>
                    <mat-cell
                        *matCellDef="let beca"
                    >
                        <p>{{ beca.primerApellido }}</p>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="segundoApellido">
                    <mat-header-cell
                        *matHeaderCellDef
                        mat-sort-header
                    >Segundo apellido</mat-header-cell>
                    <mat-cell
                        *matCellDef="let beca"
                    >
                        <p>{{ beca.segundoApellido }}</p>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="nombre">
                    <mat-header-cell
                        *matHeaderCellDef
                        mat-sort-header
                    >Nombre</mat-header-cell>
                    <mat-cell
                        *matCellDef="let beca"
                    >
                        <p>{{ beca.nombre }}</p>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="descuento">
                    <mat-header-cell
                        *matHeaderCellDef
                        mat-sort-header
                    >Descuento %</mat-header-cell>
                    <mat-cell
                        *matCellDef="let beca"
                    >
                        <p>{{ (beca.descuento * 100) }}</p>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="curso">
                    <mat-header-cell
                        *matHeaderCellDef
                        mat-sort-header
                    >Curso</mat-header-cell>
                    <mat-cell
                        *matCellDef="let beca"
                        fxFlex="1 1 100%"
                    >
                        <p>{{ beca.curso }}</p>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="nivel">
                    <mat-header-cell
                        *matHeaderCellDef
                        mat-sort-header
                    >Nivel</mat-header-cell>
                    <mat-cell
                        *matCellDef="let beca"
                    >
                        <p>{{ beca.nivel }}</p>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="modalidad">
                    <mat-header-cell
                        *matHeaderCellDef
                        mat-sort-header
                    >Modalidad</mat-header-cell>
                    <mat-cell
                        *matCellDef="let beca"
                    >
                        <p>{{ beca.modalidad }}</p>
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="acciones" stickyEnd>
                    <mat-header-cell
                        *matHeaderCellDef
                        mat-sort-header
                        fxLayout="row" fxLayoutAlign="center center" class="text-center"
                    >
                        Acciones
                    </mat-header-cell>
                    <mat-cell *matCellDef="let beca" fxLayout="row" fxLayoutAlign="center center" class="text-center">
                        <button mat-icon-button type="button" matTooltip="Aplicar" (click)="onAplicarBeca(beca)">
                            <mat-icon>group_add</mat-icon>
                        </button>
                    </mat-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="displayedColumnsBecas; sticky:true"></mat-header-row>
                <mat-row
                    *matRowDef="let row; columns: displayedColumnsBecas;"
                    class="element"
                >
                </mat-row>
            </mat-table>
        </div>
    </div>
</div>