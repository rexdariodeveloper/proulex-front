<div mat-dialog-content>
	<form *ngIf="!!form"
		focusInvalidInput
		name="form"
		id="form"
		[formGroup]="form"
		class="product w-100-p"
		fxLayout="column"
		fxFlex
	>
		<div fxLayout="row wrap" fxLayoutAlign="start center" fxLayoutGap="10px grid">
			<mat-form-field appearance="outline" floatLabel="auto" fxFlex="1 0 auto">
				<mat-label>Concepto</mat-label>
				<input matInput name="descripcion" formControlName="descripcion" 
					required="{{ isRequired('descripcion') }}">
				<mat-error *ngIf="(!!form.get('descripcion').errors)">
					{{validatorService.getMessage(form.get('descripcion'))}}
				</mat-error>
			</mat-form-field>
		</div>

		<div fxLayout="row wrap" fxLayoutAlign="start center" fxLayoutGap="10px grid">
			<pixvs-mat-select [matSelectCtrl]="unidadMedidaControl" [datos]="listUnidadMedida"
				[appearance]="'outline'"
				[matError]="'ERRORES_CAPTURA.CAMPO_REQUERIDO' | translate"
				[campoValor]="'nombre'" [label]="'Unidad de medida'"
				[required]="isRequired('unidadMedida')" fxFlex="1 0 auto">
			</pixvs-mat-select>

			<mat-form-field appearance="outline" floatLabel="auto" fxFlex="1 0 auto">
				<mat-label>Cantidad</mat-label>
				<input matInput name="cantidad" formControlName="cantidad" 
					required="{{ isRequired('cantidad') }}" 
					mask="separator.4" thousandSeparator=",">
				<mat-error *ngIf="(!!form.get('cantidad').errors)">
					{{validatorService.getMessage(form.get('cantidad'))}}
				</mat-error>
			</mat-form-field>
		</div>

		<div fxLayout="row wrap" fxLayoutAlign="start center" fxLayoutGap="10px grid">
			<mat-form-field appearance="outline" floatLabel="auto" fxFlex="1 0 auto">
				<mat-label>Precio unitario</mat-label>
				<input matInput name="valorUnitario" formControlName="valorUnitario"
					required="{{ isRequired('valorUnitario') }}" 
					prefix="$ " mask="separator.6" thousandSeparator=",">
				<mat-error *ngIf="(!!form.get('valorUnitario').errors)">
					{{validatorService.getMessage(form.get('valorUnitario'))}}
				</mat-error>
			</mat-form-field>

			<mat-form-field appearance="outline" floatLabel="auto" fxFlex="1 0 auto">
				<mat-label>Descuento</mat-label>
				<input matInput name="descuento" formControlName="descuento" 
					required="{{ isRequired('descuento') }}" 
					prefix="$ " mask="separator.6" thousandSeparator=",">
				<mat-error *ngIf="(!!form.get('descuento').errors)">
					{{validatorService.getMessage(form.get('descuento'))}}
				</mat-error>
			</mat-form-field>
		</div>

		<div fxlayout="row" fxlayoutalign="start center" class="my-20" style="display: flex; border-bottom: solid 1px lightgray;">
			<div class="h2 secondary-text ng-tns-c345-79">Impuestos</div>
		</div>

		<div fxLayout="row wrap" fxLayoutAlign="start center" fxLayoutGap="10px grid">
			<mat-form-field appearance="outline" floatLabel="auto" fxFlex="1 0 auto">
				<mat-label>IVA</mat-label>
				<input matInput name="iva" formControlName="iva"
					required="{{ isRequired('iva') }}"
					[disabled]="form.get('ivaExento').value"
					prefix="% " mask="99">
				<mat-error *ngIf="(!!form.get('iva').errors)">
					{{validatorService.getMessage(form.get('iva'))}}
				</mat-error>
			</mat-form-field>

			<mat-form-field appearance="outline" floatLabel="auto" fxFlex="1 0 auto">
				<mat-label>Importe</mat-label>
				<input matInput name="importeIVA" formControlName="importeIVA" 
					required="{{ isRequired('importeIVA') }}" 
					prefix="$ " mask="separator.6" thousandSeparator=",">
				<mat-error *ngIf="(!!form.get('importeIVA').errors)">
					{{validatorService.getMessage(form.get('importeIVA'))}}
				</mat-error>
			</mat-form-field>

			<div fxLayout="row" fxLayoutAlign="center center" class="mb-20" fxFlex="1 0 auto">
				<mat-checkbox color="primary" name="ivaExento" formControlName="ivaExento">
					IVA exento
				</mat-checkbox>
			</div>
		</div>

		<div fxLayout="row wrap" fxLayoutAlign="start center" fxLayoutGap="10px grid">
			<mat-form-field appearance="outline" floatLabel="auto" fxFlex="1 0 auto" *ngIf="!iepsCuotaFijaCheckControl.value">
				<mat-label>IEPS</mat-label>
				<input matInput name="ieps" formControlName="ieps"
					required="{{ isRequired('ieps') }}"
					prefix="% " mask="99">
				<mat-error *ngIf="(!!form.get('ieps').errors)">
					{{validatorService.getMessage(form.get('ieps'))}}
				</mat-error>
			</mat-form-field>

			<mat-form-field appearance="outline" floatLabel="auto" fxFlex="1 0 auto" *ngIf="iepsCuotaFijaCheckControl.value">
				<mat-label>IEPS cuota fija</mat-label>
				<input matInput name="iepsCuotaFija" formControlName="iepsCuotaFija"
					required="{{ isRequired('iepsCuotaFija') }}"
					prefix="$ " mask="separator.6" thousandSeparator=",">
				<mat-error *ngIf="(!!form.get('iepsCuotaFija').errors)">
					{{validatorService.getMessage(form.get('iepsCuotaFija'))}}
				</mat-error>
			</mat-form-field>

			<mat-form-field appearance="outline" floatLabel="auto" fxFlex="1 0 auto">
				<mat-label>Importe</mat-label>
				<input matInput name="importeIEPS" formControlName="importeIEPS" 
					required="{{ isRequired('importeIEPS') }}" 
					prefix="$ " mask="separator.6" thousandSeparator=",">
				<mat-error *ngIf="(!!form.get('importeIEPS').errors)">
					{{validatorService.getMessage(form.get('importeIEPS'))}}
				</mat-error>
			</mat-form-field>

			<div fxLayout="row" fxLayoutAlign="center center" class="mb-20" fxFlex="1 0 auto">
				<mat-checkbox color="primary" name="iepsCuotaFijaCheckControl" formControlName="iepsCuotaFijaCheckControl">
					Cuota fija
				</mat-checkbox>
			</div>
		</div>

		<div fxLayout="row wrap" fxLayoutAlign="start center" fxLayoutGap="10px grid">
			<mat-form-field appearance="outline" floatLabel="auto" fxFlex="1 0 auto">
				<mat-label>Clave de producto</mat-label>
				<input matInput name="claveProdServ" formControlName="claveProdServ" 
					required="{{ isRequired('claveProdServ') }}">
				<mat-error *ngIf="(!!form.get('claveProdServ').errors)">
					{{validatorService.getMessage(form.get('claveProdServ'))}}
				</mat-error>
			</mat-form-field>

			<mat-form-field appearance="outline" floatLabel="auto" fxFlex="1 0 auto">
				<mat-label>Total</mat-label>
				<input matInput name="total" formControlName="total" 
					required="{{ isRequired('total') }}" 
					prefix="$ " mask="separator.6" thousandSeparator=",">
				<mat-error *ngIf="(!!form.get('total').errors)">
					{{validatorService.getMessage(form.get('total'))}}
				</mat-error>
			</mat-form-field>
		</div>

		<div fxLayout="row wrap" fxLayoutAlign="start center" fxLayoutGap="10px grid">
			<pixvs-mat-select [matSelectCtrl]="objetoImpuestoControl" [datos]="listObjetoImpuesto"
				[appearance]="'outline'"
				[matError]="'ERRORES_CAPTURA.CAMPO_REQUERIDO' | translate"
				[campoValor]="'valor'" [label]="'Objeto impuesto'"
				[required]="isRequired('objetoImpuesto')" fxFlex="1 0 auto">
			</pixvs-mat-select>
		</div>
	</form>
</div>

<div mat-dialog-actions dir="rtl">
	<button mat-raised-button class="mat-accent mr-16" (click)="aceptar()">Aceptar</button>
	<button mat-button (click)="cancelar()">Cancelar</button>
</div>